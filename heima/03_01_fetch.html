<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>Fetch core syntax</h2>
    <button class="btn">test</button>
    <script>
        /**
         * fetch的核心语法
         * 1. 如何发请求
         * 2. 如何处理相应（JSON）
         * 3. 如何处理异常
         * */

         const p = new URLSearchParams({pname: '广东省', cname: '深圳市'});

        document.querySelector('.btn').addEventListener('click', async () => {
            const res = await fetch('http://hmajax.itheima.net/api/area?' + p.toString());
            if (res.status >= 200 && res.status < 300) {
                console.log(await res.json());
            } else  {
                console.log("error:", res.status);
            }
        })

    </script>
</body>
</html>